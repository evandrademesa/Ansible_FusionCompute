- name: login
  hosts: localhost
  tasks:
    - name: login
      uri: 
       url: "https://10.50.25.151:7443/service/session"
       validate_certs: no
       return_content: yes
       body_format: json
       method: POST
       headers: 
         Content-Type: 'application/json; charset=UTF-8'
         Accept: 'application/json;version=3;charset=UTF-8'
         Accept-Language: 'en_US'
         X-Auth-User: 'api'
         X-Auth-Key: 'Huawei12#$'
         X-Auth-UserType: '2'
         X-ENCRIPT-ALGORITHM: '1'
      register: login
    
    - name: Print content json dictionary
      debug:
        var: login.json
        token1: login.json
   
    - name: Print tokrn
      debug:
        var: login.x_auth_token
      register: token1
    
    - name: get siteID
      uri: 
       url: "https://10.50.25.151:7443/service/sites"
       validate_certs: no
       return_content: yes
       body_format: json
       method: GET
       headers: 
         Content-Type: 'application/json; charset=UTF-8'
         Accept: 'application/json;version=3;charset=UTF-8'
         X-Auth-Token: '{{token1}}'
      register: sites
      
    - name: Print content sites dictionary
      debug:
        var: sites.json
        token1: sites.json
      
         
    
